<%= javascript_include_tag('CollapsibleLists.js') %>

<%= render 'preferences/simple_header' %>
<h1>Editing Preference</h1>
<p id="error"><%= alert %></p>

<%= form_tag user_preference_path(@user, @preference), :method => "put", :id => "preference" do %>
  <ul class = "collapsibleList">
    <li class = "collapseTitle">
      Exterior Cleaning
      <ul>
        <% Preference.shifts.each do |sh| %>
          <%= select_tag "preference[shift][#{sh}]", options_for_select((Array 0..5), :selected => @preference.shift_hash[sh]) %>
          <%= label_tag "preference[shift][#{sh}]", sh %>
          <br>
        <% end %>
      </ul>
    </li>
    <li class = "collapseTitle">
      Interior Cleaning
      <ul>
        <li>Test</li>
      </ul>
    </li>
    <li class = "collapseTitle">
      Kitchen
      <ul>
        <li>Test</li>
      </ul>
    </li>
    <li class = "collapseTitle">
      Rotating Shift
      <ul>
        <li>Test</li>
      </ul>
    </li>
    <li class = "collapseTitle">
      WR
      <ul>
        <li>Test</li>
      </ul>
    </li>
  </ul>
  
  <br>

  <table class= 'table'>
    <tbody>
      <tr>
        <th>Times</th>
        <% Preference.times.each do |t| %>
          <th><%= t %></th>    
        <% end %>
      </tr>
      <tr>
      <% Preference.days.each do |d| %>
        <tr>
          <td>
          <%= d %>
          </td>
          <% Preference.times.each do |t| %>
            <td>
            <%= select_tag "preference[schedule][#{d}][#{t}]", options_for_select(["+", "-", "x", "?", " "], :selected =>  @preference.schedule_hash[d][t]) %>
            </td>
          <% end %>
        </tr>
      <% end %>
      </tr>
    </tbody>
  </table>
  
  <br>
  <div class = "savePref">
    <%= submit_tag "Save Preferences" %>
  </div>
<% end %>

<div class = "ending">
  <%= link_to 'Show', user_preference_path(@user, @preference) %> |
  <%= link_to 'Back', user_path(@user) %>
</div>